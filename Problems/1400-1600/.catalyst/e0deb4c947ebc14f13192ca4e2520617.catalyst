{"title":{"en":"C. Tree Infection","ru":"C. Заражение дерева"},"contestId":"1665","problemIndex":"C","timeLimit":{"en":"1 second","ru":"1 секунда"},"memLimit":{"en":"256 megabytes","ru":"256 мегабайт"},"inputFormat":{"en":"standard input","ru":"стандартный ввод"},"outputFormat":{"en":"standard output","ru":"стандартный вывод"},"problemHtml":{"en":"<p>A tree is a connected graph without cycles. A rooted tree has a special vertex called the root. The parent of a vertex $$$v$$$ (different from root) is the previous to $$$v$$$ vertex on the shortest path from the root to the vertex $$$v$$$. Children of the vertex $$$v$$$ are all vertices for which $$$v$$$ is the parent.</p><p>You are given a rooted tree with $$$n$$$ vertices. The vertex $$$1$$$ is the root. Initially, all vertices are healthy.</p><p>Each second you do <span class=\"tex-font-style-bf\">two</span> operations, the <span class=\"tex-font-style-it\">spreading</span> operation and, after that, the <span class=\"tex-font-style-it\">injection</span> operation: </p><ol> <li> Spreading: for <span class=\"tex-font-style-bf\">each</span> vertex $$$v$$$, if at least one child of $$$v$$$ is infected, you can spread the disease by infecting at most one other child of $$$v$$$ of your choice. </li><li> Injection: you can choose any healthy vertex and infect it. </li></ol><p>This process repeats each second until the whole tree is infected. You need to find the minimal number of seconds needed to infect the whole tree.</p>","ru":"<p>Деревом называется связный граф без циклов. В корневом дереве есть особая вершина, которая называется корнем. Родитель вершины $$$v$$$ (отличной от корня)&nbsp;— вершина перед $$$v$$$ на кратчайшем пути от корня до $$$v$$$. Дети вершины $$$v$$$&nbsp;— все вершины, для которых $$$v$$$ является родителем.</p><p>Вам дано корневое дерево из $$$n$$$ вершин. Вершина $$$1$$$&nbsp;— корень. Изначально все вершины здоровы. </p><p>Каждую секунду вы делаете <span class=\"tex-font-style-bf\">две</span> операции: <span class=\"tex-font-style-it\">распространение</span> и, после этого, <span class=\"tex-font-style-it\">инъекцию</span>:</p><ol> <li> Распространение: для <span class=\"tex-font-style-bf\">каждой</span> вершины $$$v$$$, если хотя бы один ребёнок $$$v$$$ заражён, то вы можете распространить инфекцию, дополнительно заразив не более одного ребёнка $$$v$$$ на свой выбор. </li><li> Инъекция: вы можете выбрать одну любую здоровую вершину и заразить её. </li></ol><p>Этот процесс повторяется каждую секунду до тех пор, пока всё дерево не будет заражено. Необходимо найти минимальное время в секундах, за которое можно заразить всё дерево.</p>"},"inSpecsHtml":{"en":"<div class=\"section-title\">Input</div><p>The input consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\le t \\le 10^4$$$)&nbsp;— the number of test cases. Description of the test cases follows.</p><p>The first line of each test case contains a single integer $$$n$$$ ($$$2 \\le n \\le 2 \\cdot 10^5$$$)&nbsp;— the number of the vertices in the given tree.</p><p>The second line of each test case contains $$$n - 1$$$ integers $$$p_2, p_3, \\ldots, p_n$$$ ($$$1 \\le p_i \\le n$$$), where $$$p_i$$$ is the ancestor of the $$$i$$$-th vertex in the tree.</p><p>It is guaranteed that the given graph is a tree.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases doesn't exceed $$$2 \\cdot 10^5$$$.</p>","ru":"<div class=\"section-title\">Входные данные</div><p>Каждый тест состоит из нескольких наборов входных данных. В первой строке находится единственное целое число $$$t$$$ ($$$1 \\le t \\le 10^4$$$)&nbsp;— количество наборов входных данных. Далее следует описание наборов входных данных.</p><p>Первая строка каждого набора входных данных содержит единственное целое число $$$n$$$ ($$$2 \\le n \\le 2 \\cdot 10^5$$$)&nbsp;— количество вершин в данном дереве.</p><p>Вторая строка каждого набора входных данных содержит $$$n - 1$$$ целое число $$$p_2, p_3, \\ldots, p_n$$$ ($$$1 \\le p_i \\le n$$$), где $$$p_i$$$&nbsp;— предок $$$i$$$-й вершины в дереве.</p><p>Гарантируется, что данный граф является деревом.</p><p>Гарантируется, что сумма $$$n$$$ по всем наборам входных данных не превосходит $$$2 \\cdot 10^5$$$.</p>"},"outSpecsHtml":{"en":"<div class=\"section-title\">Output</div><p>For each test case you should output a single integer&nbsp;— the minimal number of seconds needed to infect the whole tree.</p>","ru":"<div class=\"section-title\">Выходные данные</div><p>Для каждого набора входных данных выведите одно число&nbsp;— минимальное время в секундах, за которое можно заразить всё дерево.</p>"},"noteHtml":{"en":"<div class=\"section-title\">Note</div><p>The image depicts the tree from the first test case during each second.</p><p>A vertex is black if it is not infected. A vertex is blue if it is infected by <span class=\"tex-font-style-it\">injection</span> during the previous second. A vertex is green if it is infected by <span class=\"tex-font-style-it\">spreading</span> during the previous second. A vertex is red if it is infected earlier than the previous second.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/f01588af1790f44baaf9ef7f1b0e2e799ecf127b.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> </center><p>Note that you are able to choose which vertices are infected by <span class=\"tex-font-style-it\">spreading</span> and by <span class=\"tex-font-style-it\">injections</span>.</p>","ru":"<div class=\"section-title\">Примечание</div><p>На картинке изображено дерево из первого набора входных данных в каждую секунду.</p><p>Вершина покрашена в чёрный, если она не заражена. Вершина покрашена в синий, если она заражена <span class=\"tex-font-style-it\">инъекцией</span> в течение последней прошедшей секунды. Вершина покрашена в зелёный, если она заражена <span class=\"tex-font-style-it\">распространением</span> в течение последней прошедшей секунды. Вершина покрашена в красный, если она заражена, но не в течение последней прошедшей секунды.</p><center> <img class=\"tex-graphics\" src=\"https://espresso.codeforces.com/f01588af1790f44baaf9ef7f1b0e2e799ecf127b.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> </center><p>Обратите внимание, что вы можете выбирать, какие именно вершины будут заражены <span class=\"tex-font-style-it\">распространением</span> и <span class=\"tex-font-style-it\">инъекциями</span>.</p>"},"sampleTestcases":[{"id":1651512885743,"input":"5\n7\n1 1 1 2 2 4\n5\n5 5 1 4\n2\n1\n3\n3 1\n6\n1 1 1 1 1\n","output":"4\n4\n2\n3\n4\n","result":{"id":1651512885743,"stdout":"4\r\n4\r\n2\r\n3\r\n4\r\n","stderr":"","exitcode":0,"signal":null,"time":32,"timeout":false}},{"id":1651514005458,"input":"1\n13\n1 1 2 2 2 2 2 3 3 3 3 3","output":"5","result":{"id":1651514005458,"stdout":"5\r\n","stderr":"","exitcode":0,"signal":null,"time":31,"timeout":false}}],"submitUrl":"https://codeforces.com/problemset/submit","language":"c++","langId":"50"}